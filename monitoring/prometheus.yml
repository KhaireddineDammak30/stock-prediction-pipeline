# monitoring/prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'spark-master'
    static_configs:
      - targets: ['spark-master:8090']   # JMX agent exposes /metrics

  - job_name: 'spark-workers'
    static_configs:
      - targets:
        - 'spark-worker-1:8091'         # both workers listen on 8091 (inside the docker net)
        - 'spark-worker-2:8091'

  - job_name: 'spark-driver'
    static_configs:
      - targets: ['spark-submit:8092']  # driver (when a job is running)